(()=>{(()=>{$el("x-input",[],e=>{m(e),Object.defineProperties(e,{value:{get:()=>e.querySelector("input")?.value,set:s=>{e.querySelector("input").value=s}},setType:{value:s=>{s&&["text","password","email","number","search","tel"].includes(r)&&e.querySelector("input")?.setAttribute("type",s)},writable:!1},setReadOnly:{value:s=>{s&&[!0,!1].includes(s)&&(s?e.querySelector("input")?.setAttribute("readonly","true"):e.querySelector("input")?.removeAttribute("readonly"))},writable:!1},setDisable:{value:s=>{s&&[!0,!1].includes(s)&&(r?e.querySelector("input")?.setAttribute("disabled","true"):e.querySelector("input")?.removeAttribute("disabled"))},writable:!1},setIcon:{},setError:{},setHelper:{}})},(e,s,d,c)=>{s=="t-options"&&c&&m(e)});function m(e){console.log("helper",e.getAttribute("data-helper"));var s=e.options(),d=e.getAttribute("data-icon"),c=e.getAttribute("data-helper"),a=e.getAttribute("data-pattern");if(s.class=s.class||["mih2.5rem","w100%","oli{none}","bd{1px;solid;#4D4F5C}","bda0.25rem","c{#4D4F5C}","p{.45rem;3rem;.45rem;1rem}","fns--fs-s"],Array.isArray(s.class)||(s.class=s.class.split(" ")),s.class=s.class.join(" "),d&&f(i(d)))var u=`<x-svg t-options='${d}' class="dB wFc b{20%} r0.5rem"></x-svg>`;if(c&&f(i(c))){let g=i(c);var k=g.text?`<div class="c{#4D4F5C80} fns--fs-s">${g.text}</div>`:""}e.innerHTML=`
        <div class="dF fxdC gap0.5rem">
            <div class="dF aic">
                <input ${Object.keys(s).map(g=>`${g}="${s[g]}"`).join(" ")}>
                ${u}
            </div>
            ${k}
        </div>`;let o=e.querySelector("input");o&&(o.oninput=g=>{console.log("input",g.target.value),e.value=g.target.value,e.dispatchEvent(new Event("input"))},o.onchange=g=>{console.log("onchange",g.target.value),e.value=g.target.value,a&&(new RegExp(a).test(g.target.value)?(o.classList.toggle("bd{1px;solid;#4D4F5C}",!0),o.classList.toggle("bd{1px;solid;#FF6565}",!1)):(o.classList.toggle("bd{1px;solid;#FF6565}",!0),o.classList.toggle("bd{1px;solid;#4D4F5C}",!1))),e.dispatchEvent(new Event("change"))})}function f(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}function i(e){try{return JSON.parse(e)}catch{return null}}})();(()=>{$el("x-button",[],e=>{m(e),e.setDisable=s=>{},e.setIcon=s=>{},e.hideIcon=s=>{},e.options=()=>{},e.resize=()=>{}},(e,s,d,c)=>{s=="t-options"&&c&&m(e)});function m(e){var s=e.options(),d=e.getAttribute("data-icon");s.class=s.class||["cr","flt{brightness(90%);contrast(200%)}:hover","td","wFc","dF","aiC","gap2rem","xs:px{1.5rem}","p{0.8rem;3.3rem}","fns--fs-m","bg{var(--c-lgreen)}","bda1.5625rem","bd!N"],Array.isArray(s.class)||(s.class=s.class.split(" ").filter(a=>a)),s.class=s.class.join(" ");var c="";d&&f(i(d))&&(c=`<x-svg t-options='${d}'></x-svg>`),e.innerHTML=`<a ${Object.keys(s).map(a=>`${a}="${s[a]}"`).join(" ")}>${c} ${s.title}</a>`}function f(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}function i(e){try{return JSON.parse(e)}catch{return null}}})();(()=>{$el("t-link",[],f=>{m(f)},(f,i,e)=>{name=="t-options"&&e&&m(f)});function m(f){var i=f.options();i.class=i.class||["p{10px}","cr"],Array.isArray(i.class)||(i.class=i.class.split(" ").filter(s=>s)),i.class.push("bd{1px;solid;#ccc}","jcC","p10px","d{inline-flex}"),i.class=i.class.join(" ");var e="";i.icon&&(e=`<t-svg t-options='${JSON.stringify(i.icon)}'></t-svg>`,delete i.icon),f.innerHTML=`<a ${Object.keys(i).map(s=>`${s}="${i[s]}"`).join(" ")}>${e} ${i.title}</a>`}})();(()=>{$el("x-combo",[],t=>{var n=$state(),l=$state([]);let x=new Set;Object.defineProperties(t,{value:{get:()=>n.val,set:v=>{n.val=v},configurable:!0},setValue:{value:v=>{n.val=v,g(t,x)},writable:!1},getDataOption:{value:()=>l.val,writable:!1},setDataOption:{value:v=>{Array.isArray(v)&&v.length>0&&(l.val=v)},writable:!1},setReadOnly:{},setDisable:{},setHelper:{}}),m(t,x)},(t,n,l,x)=>{n=="t-options"&&x&&m(t)});function m(t,n){let l=t.options();l.multiple=l.multiple||!1,t.value=l.multiple?[]:"",l.value&&(t.value=l.multiple?Array.isArray(l.value)?l.value:[]:["object","function","undefined"].includes(typeof l.value)?"":l.value),l.tags=l.tags||!1,l.allowClear=l.allowClear||!1,l.suggest=l.suggest||!1,l.search=l.search||!1,l.hideClearButton=l.hideClearButton||!0,l.searchDelay=l.searchDelay||300;let x=t.getAttribute("data-helper"),v=t.getAttribute("data-options"),S="";l.class=l.class||["dF","aiC","gap0.25rem","fxw","bd{1px;solid;#dee4f0}","bda0.375rem","p{0.25rem;1rem}","posR","bd!N;>;label"],Array.isArray(l.class)||(l.class=l.class.split(" "));let y=l.minHeight?"mih"+l.minHeight:"mih2.5rem";l.class.push(y),l.class=l.class.join(" ");var $="";if(x&&f(i(x))){let A=i(x);var $=A.text?`<div class="${A.color??"c{var(--c-red)}"} fns--fs-s">${A.text}</div>`:""}if(v&&Array.isArray(i(v))){let A=i(v);if(Array.isArray(A)&&A.length>0){t.setDataOption(A);for(let T of A){let F=!1;if(Array.isArray(t.value))for(let B of t.value)B==T.value&&(n.add(T.label),F=!0);else T.value==t.value&&(n.add(T.label),F=!0);let I=`<input class="fxs bda0.25rem bgc{var(--c-white)} bd{1px;solid;#cdb5e1} h1em w1em vaT" type="checkbox" ${F?"checked":""} value="${T.value??""}"/>`,H="";T.icon&&T.icon.length>0&&(H=`<x-svg class="dB bds!N wFc" t-options="name:'close'"></x-svg>`),console.log("item.icon && item.icon.length",T),S+=`
                    <label class="cr dF aiC gap0.5rem ws{normal} bda0.375rem bg{transparent} bg{#E8E9EC}:active bg{#E8E9EC}:hover wrb{break-work} clr{both} c{#566177} p0.625rem w100% bd!N" data-value="${T.value??""}" data-label="${T.label??""}">
                        ${T.icon&&T.icon.length>0?H:I}
                        <span class="tolE ofl{hidden} ws{nowrap}">${T.label??""}</span>
                    </label>`}}}let C="";l.allowClear&&(C=`<x-svg class="dB bds!N wFc posA r{0.5rem} cr bxshd{0px;4px;12px;#3333331f}:hover d!N bda50%" t-options="name:'close',fill:'#aabad0', width:18, height: 18" name="clear_select"></x-svg>`);let w="";l.suggest||l.search&&(w=`<div class="dF aiC bd!N bdb!{1px;solid;#ddd}">
                        <input type="text" placeholder="Search..." class="bd!N oli{none} dB fns0.875rem mih2rem w100% px{0.625rem}" name="search">
                        <x-svg class="dB wFc posA r{1rem} opc0.8 opc1:hover cr bxshd{0px;4px;12px;#3333331f}:hover bda50% d!N" t-options="name:'close',fill:'#aabad0', width:18, height:18" name="clear_search"></x-svg>
                    </div>`),t.innerHTML=`
        <div class="dF fxdC gap1rem bxsz{'border-box'}">
            <div class="${l.class}" name='combobox-container'>
                <div class="dF fxdC fx1">
                    <input class="bg{var(--c-white)} c{var(--c-black)} bdN oli{none} dB fns0.875rem w100% pr0.875rem bd!N cr ${y}" ${l.suggest?"":"readonly"} name="filter" autocomplete="off" placeholder="${l.placeholder??""}"/>
                    <div class="bxshd{0px;4px;12px;#3333331f} h{fit-content} mt0.25rem bgc{var(--c-white)} w100% bda0.375rem fns0.875rem posA taL z{1000} t100% l0 bd!N dN" name="dropdown">
                        ${w}
                        ${S}
                        <div class="dF aiC d!N p{0.5rem;1rem}" name="no-result">Kh\xF4ng c\xF3 k\u1EBFt qu\u1EA3 n\xE0o \u0111\u01B0\u1EE3c t\xECm th\u1EA5y</div>
                    </div>
                </div>
                ${C}
                <x-svg class="dB bds!N wFc posA r{0.5rem} tra{rotate(90deg)} cr" t-options="name:'chevron_right',fill:'#aabad0', width:18, height:18" name="arrow"></x-svg>
            </div>
            ${$}
        </div>`;let E=t.querySelector('input[name="filter"]'),L=t.querySelector('x-svg[name="arrow"]'),q=t.querySelector('div[name="dropdown"]'),D=t.querySelector('div[name="combobox-container"]'),N=q.getElementsByTagName("label"),O=t.querySelector('x-svg[name="clear_select"]'),M=t.querySelector('input[name="search"]'),j=-1;if(N.length>0){let A;for(let T of N)T.addEventListener("click",function(F){A&&clearTimeout(A),A=setTimeout(()=>{k(l.multiple,this,t,l.allowClearItem,D,N,E,q,L,n,l.allowClear,O)},1),F.stopPropagation()})}O&&(O.onclick=A=>{if(Array.isArray(t.value))if(t.value.length=0,t.value=[],l.allowClearItem){let T=D.querySelectorAll('span[name2="option-allow-clear"]');if(T&&T.length>0)for(let F of T)F.remove()}else E.value="";else t.value="",E.value="";n.clear();for(let T of N)T.querySelector('input[type="checkbox"]')&&(T.querySelector('input[type="checkbox"]').checked=!1);O.classList.toggle("d!N",!0)}),E&&(E.oninput=A=>{o(A.target,N,q,l.multiple,l.allowClearItem,t,n),l.suggest&&!l.allowClearItem&&q.classList.contains("dN")&&s(q,L)},E.onclick=A=>{d(N,q),l.suggest&&!l.allowClearItem||s(q,L)},E.onkeyup=A=>{if(["Tab","Enter","ArrowDown","ArrowUp","Escape"].includes(A.key))switch(A.stopPropagation(),A.key){case"Escape":q.classList.toggle("dN",!0);break;case"Tab":case"Enter":j==-1&&(j=0);let T=N[j];k(l.multiple,T,t,l.allowClearItem,D,N,E,q,L,n,l.allowClear,O,!0);break;default:break}}),M&&(M.oninput=A=>{o(A.target,N,q,!1,!1,t,n)}),L&&(L.onclick=A=>{s(q,L)}),q&&(q.onclick=A=>{A.stopPropagation()}),D&&(D.onkeydown=A=>{(A.key==="Tab"||A.key==="Enter")&&A.preventDefault(),(A.key==="ArrowDown"||A.key==="ArrowUp")&&(A.preventDefault(),A.key==="ArrowDown"&&(j=(j+1)%N.length,c(j,N)),A.key==="ArrowUp"&&(j=(j-1+N.length)%N.length,c(j,N)))}),t.value&&t.value.length>0&&b(t,q,N,D,L,O,E,n),document.addEventListener("click",function(A){if(!A.target.closest('div[name="combobox-container"]')){let T=t.querySelector('div[name="dropdown"]'),F=t.querySelector('x-svg[name="arrow"]');T.classList.toggle("dN",!0),e(T,F)}})}function f(t){return t!==null&&typeof t=="object"&&!Array.isArray(t)}function i(t){try{return JSON.parse(t)}catch{return null}}function e(t,n){t.classList.contains("dN")?(n.classList.toggle("tra{rotate(90deg)}",!0),n.classList.toggle("tra{rotate(270deg)}",!1)):(n.classList.toggle("tra{rotate(90deg)}",!1),n.classList.toggle("tra{rotate(270deg)}",!0))}function s(t,n){window.currentlyOpenDropdown&&window.currentlyOpenDropdown!==t&&window.currentlyOpenDropdown.classList.add("dN"),t?.classList.toggle("dN");var l=t.getBoundingClientRect();l.bottom>window.innerHeight?(t.classList.toggle("t100%",!1),t.classList.toggle("t{-205%}",!0)):(t.classList.toggle("t100%",!0),t.classList.toggle("t{-205%}",!1)),e(t,n),window.currentlyOpenDropdown=t.classList.contains("dN")?null:t}function d(t,n){if(t.length>0){n.querySelector('div[name="no-result"]').classList.toggle("d!N",!0);for(let l of t)l.classList.toggle("d!N",!1),l.classList.toggle("bg!{#E8E9EC}",!1)}}function c(t,n){if(n.length>0)for(let l of n)l.classList.toggle("bg!{#E8E9EC}",!1);t>=0&&t<n.length&&n[t].classList.toggle("bg!{#E8E9EC}",!0)}function a(t,n,l){let x=t.querySelector('input[type="checkbox"]'),v=x?x.value:t.getAttribute("data-value"),S=t.getAttribute("data-label"),y=n.value??[],$=!1;return y.includes(v)?n.value=y.filter(C=>C!==v):(n.value.push(v),$=!0),l.has(S)?l.delete(S):l.add(S),{selectedValues:Array.from(l),newText:S.trim(),chosen:$,newValue:v}}function u(t,n,l,x,v,S){let{span:y,"x-svg":$}=$tags,C=$({class:"dB wFc","t-options":'name:"close", width:16, height:16, fill: "#4D4F5C"',"data-value":t,onclick:E=>{v.querySelector(`span[name="options-${t}"]`)?.remove(),S.querySelector(`label[data-value="${t}"]`).querySelector('input[type="checkbox"]')&&(S.querySelector(`label[data-value="${t}"]`).querySelector('input[type="checkbox"]').checked=!1),l.value=l.value.filter(L=>L!==t),x.has(n)&&x.delete(n)}});return y({class:"dF aiC miw1px c{#4D4F5C} bda0.75rem bd{1px;solid;#E8E9EC} fns0.875rem p{0.25rem;0.5rem} gap0.25rem wrb{break-word}",innerText:n,name:`options-${t}`,name2:"option-allow-clear"},C)}function k(t,n,l,x,v,S,y,$,C,w,E,L,q=!1){if(t){let D=a(n,l,w);if(q&&n.querySelector('input[type="checkbox"]')&&(n.querySelector('input[type="checkbox"]').checked=D.chosen),x)if(D.chosen){let N=u(D.newValue,D.newText,l,w,v,$);v.prepend(N)}else l.querySelector(`span[name="options-${D.newValue}"]`)?.remove();else y.value=D.selectedValues.join(", "),y.scrollWidth>y.clientWidth&&(y.value=`\u0110\xE3 ch\u1ECDn (${D.selectedValues.length})`)}else{p(S);let D=n.querySelector('input[type="checkbox"]');D&&(D.checked=!0),l.value=n.getAttribute("data-value"),y.value=n.innerText.trim(),$?.classList.toggle("dN"),e($,C)}h(l.value,E,C,L)}function o(t,n,l,x,v,S,y){let $=t.value;x&&!v&&($=$.split(",").map(w=>w.trim()));let C=!0;for(let w=0;w<n.length;w++){let E=n[w].textContent?.trim()||n[w].innerText?.trim();if(Array.isArray($)){$.some(D=>E.toUpperCase().includes(D.toUpperCase()))?(C=!1,n[w].classList.toggle("d!N",!1)):n[w].classList.toggle("d!N",!0);let L=n[w].getAttribute("data-value"),q=n[w].getAttribute("data-label");$.some(D=>q===D)?S.value.includes(L)||(S.value=[...S.value,L],y.add(q),n[w].querySelector('input[type="checkbox"]')&&(n[w].querySelector('input[type="checkbox"]').checked=!0)):S.value.includes(L)&&(S.value=S.value.filter(D=>D!==L),y.delete(q),n[w].querySelector('input[type="checkbox"]')&&(n[w].querySelector('input[type="checkbox"]').checked=!1))}else E.toUpperCase().indexOf($.toUpperCase())>-1?(C=!1,n[w].classList.toggle("d!N",!1)):n[w].classList.toggle("d!N",!0)}C?l.querySelector('div[name="no-result"]').classList.toggle("d!N",!1):l.querySelector('div[name="no-result"]').classList.toggle("d!N",!0)}function g(t,n){let l=t.querySelector('input[name="filter"]'),x=t.querySelector('x-svg[name="arrow"]'),v=t.querySelector('div[name="dropdown"]'),S=t.querySelector('div[name="combobox-container"]'),y=v.getElementsByTagName("label"),$=t.querySelector('x-svg[name="clear_select"]');b(t,v,y,S,x,$,l,n,!0)}function b(t,n,l,x,v,S,y,$,C=!1){let w=t.options();if(w.multiple){if(w.allowClearItem){let E=x.querySelectorAll('span[name2="option-allow-clear"]');if(E&&E.length>0)for(let L of E)L.remove();if(Array.isArray(t.value)&&t.value.length>0)for(let L of t.value){let q="";for(let N of t.getDataOption())if(N.value==L){q=N.label;break}let D=u(L,q,t,$,x,n);x.prepend(D)}}else y.value=Array.from($).join(", "),y.scrollWidth>y.clientWidth&&(y.value=`\u0110\xE3 ch\u1ECDn (${$.length})`);if(C&&Array.isArray(t.value)&&t.value.length>0){p(l);for(let E of t.value){let q=n.querySelector(`label[data-value="${E}"]`)?.querySelector('input[type="checkbox"]');q&&(q.checked=!0)}}}else{let E=n.querySelector(`label[data-value="${t.value}"]`);if(C){p(l);let L=E?.querySelector('input[type="checkbox"]');L&&(L.checked=!0)}y.value=E.innerText.trim()}h(t.value,w.allowClear,v,S)}function p(t){if(t&&t.length>0)for(let n of t)n.querySelector("input")&&(n.querySelector("input").checked=!1)}function h(t,n,l,x){n&&(t&&t.length>0?(l.classList.toggle("d!N",!0),x.classList.toggle("d!N",!1)):(l.classList.toggle("d!N",!1),x.classList.toggle("d!N",!0)))}})();$el("t-combobox",[],m=>{var f=m.options();m.innerHTML=`<select name="${f.name||""}">
  	<option name=""> ----- </option>
  	<option name="1">Level 1</option>
  	<option name="2">Level 2</option>
  </select>`},(m,f,i,e)=>{f=="t-options"});(()=>{$el("x-tree",[],o=>{let g=$state(),b=$state();var p=$state([]);Object.defineProperties(o,{value:{get:()=>g.val,set:h=>{g.val=h},configurable:!0},selected:{get:()=>b.val,set:h=>{b.val=h},configurable:!0},data:{get:()=>p.val,set:h=>{Array.isArray(h)&&(p.val=h)},configurable:!0},setData:{value:(h,t=!1)=>{Array.isArray(h)&&(p.val=h,[!0,!1].includes(t)&&t==!0&&m(o))},writable:!1}}),m(o)},(o,g,b,p)=>{g=="t-options"&&p&&m(o)});function m(o){var g=o.options();g.checkbox&&(o.value=[]);let b=e(o.getAttribute("x-data"));console.log("options",g),b&&Array.isArray(b)&&b.length>0&&(o.data=b);let p=document.createElement("ul");p.classList.add("ws{nowrap};li"),f(o.data,0,p,o),o.insertAdjacentElement("afterbegin",p),g&&g.editEnable&&document.addEventListener("click",function(h){h.target.closest('div[name="tree"]')||(console.log("el",o.selected),o.selected&&(o.querySelector(`div[data-id="${o.selected.id}"] > span[name="tree-name"]`).classList.toggle("dN",!1),o.querySelector(`div[data-id="${o.selected.id}"] > input[type="text"]`)?.remove()))})}function f(o,g,b,p){if(!(!o||Array.isArray(o)&&o.length==0)){g+=1;for(let h of o)i(h,b,g,p)}}function i(o,g,b,p){let h=p.options(),t=h.checkbox?h.checkbox:!1,n=document.createElement("li");n.setAttribute("data-id",o.id),n.setAttribute("data-level",b);let l=document.createElement("div");l.classList.add("dF","h1rem","ws{nowrap}","cr","gap0.25rem","bdl{2px;solid;transparent}","mih1.5rem","aiC"),l.setAttribute("name","tree"),l.setAttribute("data-id",o.id),l.setAttribute("data-level",b);for(var x=0;x<b-1;x++)l.insertAdjacentHTML("afterbegin",'<span class="dIb w1rem h1rem m{0.25rem;0} va{middle} ofl{hidden}"></span>');if(o.childs&&o.childs.length>0?(l.insertAdjacentHTML("beforeend",`<x-svg class="dB wFc" t-options="name:'arrow_right', width:18, height:18" name="arrow"></x-svg>`),l.insertAdjacentHTML("beforeend",`<x-svg class="dB wFc" t-options="name:'folder',width:18, height:18"></x-svg>`),l.querySelector('x-svg[name="arrow"]').addEventListener("click",function(S){S.stopPropagation(),S.target.closest("li").querySelector("ul").classList.toggle("dN"),this.classList.toggle("tra{rotate(45deg)}")})):l.insertAdjacentHTML("beforeend",`<x-svg class="dB wFc" t-options="name:'description',width:16, height:16"></x-svg>`),l.addEventListener("click",function(v){if(console.log("click",v.target.tagName),!(v.target.tagName=="INPUT"&&v.target.name=="tree-edit")){p.querySelectorAll('div[name="tree"]').forEach(function(y){y.classList.remove("bdl{2px;solid;#39c}","bgc{#eee}","c{#39c}"),y.classList.toggle("bdl{2px;solid;transparent}",!0),h&&h.editEnable&&(console.log("abc",l.querySelector('input[name="tree-edit"]')),y.querySelector('span[name="tree-name"]').classList.toggle("dN",!1),y.querySelector('input[type="text"]')?.remove())}),this.classList.remove("bdl{2px;solid;transparent}"),this.classList.add("bdl{2px;solid;#39c}","bgc{#eee}","c{#39c}");let S=this.getAttribute("data-id");if(t||(p.value=S,p.dispatchEvent(new Event("change"))),p.selected=s(S,p.data),h&&h.editEnable){let y=document.createElement("input");y.type="text",y.value=o.name,y.name="tree-edit",l.querySelector('span[name="tree-name"]').classList.toggle("dN",!0),l.insertAdjacentElement("beforeend",y),y.addEventListener("change",function($){console.log("inputTag",s(S,p.data)),p.dispatchEvent(new CustomEvent("changeNode",{detail:{node_id:S,text:this.value}})),l.querySelector('span[name="tree-name"]').innerText=this.value})}}}),h&&h.checkbox){let v=document.createElement("input");v.type="checkbox",v.value=o.id,l.insertAdjacentElement("beforeend",v),v.addEventListener("change",function(S){console.log("level",b);let y=p.querySelectorAll(`div[data-level="${b+1}"]`);if(y&&y.length>0)for(let C of y){let w=C.querySelector('input[type="checkbox"]');w.checked=!0,p.value.includes(w.value)||p.value.push(w.value)}let $=p.querySelectorAll(`div[data-level="${b}"]`);if($&&$.length>0){let C=!0;for(let E of $)E.querySelector('input[type="checkbox"]').checked==!1&&(C=!1);let w=this.parentNode.parentNode.parentNode.parentNode.querySelector('div[name="tree"] input[type="checkbox"]');C==!0?(w.checked=!0,p.value.includes(w.value)||p.value.push(w.value)):(w.checked=!1,d(p.value,w.value))}this.checked?p.value.includes(this.value)||p.value.push(this.value):d(p.value,this.value),p.dispatchEvent(new Event("change"))})}if(l.insertAdjacentHTML("beforeend",`<span class="ws{nowrap}" name="tree-name">${o.name}</span>`),n.insertAdjacentElement("afterbegin",l),g.insertAdjacentElement("beforeend",n),console.log("node",o,o.childs),o.childs&&o.childs.length>0){let v=document.createElement("ul");v.classList.add("dN"),f(o.childs,b,v,p),n.insertAdjacentElement("beforeend",v)}}function e(o){try{return JSON.parse(o)}catch{return null}}function s(o,g){for(let b of g){if(b.id===o)return b;if(b.childs&&b.childs.length>0){let p=s(o,b.childs);if(p)return p}}return null}function d(o,g){let b=o.findIndex(p=>p===g);b!==-1&&o.splice(b,1)}let c=null;function a(o){console.log("onDragStart",o.target.getAttribute("data-id")),c=o.currentTarget,o.dataTransfer.effectAllowed="move",o.dataTransfer.setData("text/html",c.outerHTML)}function u(o){o.preventDefault(),o.dataTransfer.dropEffect="move"}function k(o){o.preventDefault();let g=c.getAttribute("data-id"),b=o.currentTarget.getAttribute("data-id");if(console.log("onDrop",o.currentTarget.getAttribute("data-id"),c.getAttribute("data-id")),g!==b){let p=o.currentTarget.querySelector("ul");if(console.log("abc",p),p)p.appendChild(c);else{let h=document.createElement("ul");h.appendChild(c),o.currentTarget.appendChild(h)}}c=null}})();(()=>{$el("x-table",[],s=>{let d=$state(),c=$state([]);Object.defineProperties(s,{selected:{get:()=>d.val,set:a=>{d.val=a},configurable:!0},data:{get:()=>c.val,set:(a,u=!1)=>{Array.isArray(a)&&(c.val=a,[!0,!1].includes(u)&&u==!0&&m(s))},configurable:!0}}),m(s)},(s,d,c,a)=>{d=="t-options"&&a&&m(s)});function m(s){var d=s.options();console.log("options",d),d.mutilSelect&&d.mutilSelect==!0&&(s.selected=[]);let c=f(s.getAttribute("x-data")),a=Array.isArray(c)?c:[],u=f(s.getAttribute("x-head")),k=Array.isArray(u)?u:[],o=document.createElement("div");o.classList.add("oflxA","oflyA","wF","sbc{#F5F6FA_transparent}","sbw{thin}");let g=document.createElement("table");g.classList.add("md:w100%","bdcl","bdc{#F1F1F3}","vaM","fns0.9375rem","fw{bold};thead","fns--fs;thead","bdb{1px;solid;#F1F1F3};td","p{0.625rem;0.825rem};td","wrb{break-word};td");let b=document.createElement("thead"),p=document.createElement("tr");if(p.classList.add("ta{left}","posSt","t0px","z1"),k&&k.length>0)for(let t of k){let n=document.createElement("td");n.innerText=t.name,p.appendChild(n)}b.appendChild(p);let h=document.createElement("tbody");if(h.classList.add("bgc{#EDEEF0};tr:hover","cr{pointer};tr","ta{left};tr"),a&&a.length>0)for(let t of a){let n=document.createElement("tr");console.log("trBodyTag",t.id),n.setAttribute("data-id",t.id);for(let l of k)for(let x in t)if(l.field==x){let v=document.createElement("td");v.innerText=t[x],n.appendChild(v)}n.addEventListener("click",function(l){let x=this.getAttribute("data-id");if(d.mutilSelect&&d.mutilSelect==!0){let v=s.selected.includes(x);v?s.selected=e(s.selected,x):s.selected.push(x),this.classList.toggle("c{#39c}",!v),this.classList.toggle("bg{#eee}",!v)}else s.selected=x,i(s),this.classList.toggle("c{#39c}",!0),this.classList.toggle("bg{#eee}",!0)}),h.appendChild(n)}g.insertAdjacentElement("afterbegin",b),g.appendChild(h),o.insertAdjacentElement("afterbegin",g),s.insertAdjacentElement("afterbegin",o)}function f(s){try{return JSON.parse(s)}catch{return null}}function i(s){let d=s.getElementsByTagName("tr");if(d&&d.length>0)for(let c of d)c.classList.toggle("c{#39c}",!1),c.classList.toggle("bg{#eee}",!1)}function e(s,d){if(typeof d=="object"&&d!==null){let[c,a]=Object.entries(d)[0];return s.filter(u=>u[c]!==a)}else return s.filter(c=>c!==d)}})();(()=>{$el("x-text",[],f=>{m(f),Object.defineProperties(f,{value:{get:()=>f.querySelector("textarea")?.value,set:i=>{f.querySelector("textarea").value=i}},setReadOnly:{value:i=>{i&&[!0,!1].includes(i)&&(i?f.querySelector("textarea")?.setAttribute("readonly","true"):f.querySelector("textarea")?.removeAttribute("readonly"))},writable:!1},setDisable:{value:i=>{i&&[!0,!1].includes(i)&&(r?f.querySelector("textarea")?.setAttribute("disabled","true"):f.querySelector("textarea")?.removeAttribute("disabled"))},writable:!1}})},(f,i,e,s)=>{i=="t-options"&&s&&m(f)});function m(f){var i=f.options();i.class=i.class||["w100%","mih2.5rem","bd{1px;solid;#E8E9EC}","bda0.25rem","c{#141735}","dB","p{.45rem;1rem}","xs:px{0.5rem}","oli{none}"],Array.isArray(i.class)||(i.class=i.class.split(" ").filter(s=>s)),i.class=i.class.join(" "),f.innerHTML=`<textarea ${Object.keys(i).map(s=>`${s}="${i[s]}"`).join(" ")}></textarea>`;let e=f.querySelector("textarea");e&&(e.oninput=s=>{s.target.style.height="auto",s.target.style.height=s.target.scrollHeight+2+"px"})}})();(()=>{$el("t-date",[],e=>{m(e)},(e,s,d,c)=>{});function m(e){var s=e.options();e.innerHTML=`<div class="t-datebox df aic"><div class="posR">
  <span class="bd bda5px p3px df aic">
  	<span class="t-input-date bd0px posr">
     	<span class="">dd</span>
          <input class="tac bd0px posa w100% h100% t0px l0px" placeholder="dd">
     </span>/
     <span class="t-input-month posr">
     	<span class="p3px">mm</span>
          <input class="tac bd0px posa w100% h100% t0px l0px" placeholder="mm">
     </span>/
     <span class="t-input-year posr">
     	<span class="">yyyy</span>
          <input class="tac bd0px posa w100% h100% t0px l0px" placeholder="yyyy">
     </span>
     <t-svg class="cicon w23px h23px ml5px cr" t-options="name:'user',fill:'${$$colors.bcolor||"gray"}'"></t-svg>
  </span>
     <span class="t-select dn">
     	<div class="posA w{auto} h{auto}">
            <div class="d-head"></div>
            <div class="d-body dG gtc{23px;23px;23px;23px;23px;23px;23px;}">

            </div>
            <div class="d-foot df aic jcC">
                 <t-button class="btn_clear" t-options="name:'',title:'Clear'"></t-button>
                 <t-button class="btn_today" t-options="name:'',title:'Today'"></t-button>
            </div>
       </div>
     </span>
  </div></div>`,e.onchange=()=>{console.log("onchange",e.val())},e.querySelector(".btn_today").onclick=()=>{e.val(Date.now())},e.querySelector(".btn_clear").onclick=()=>{d.forEach(c=>{c.value=""}),e.querySelector(".t-select").classList.add("dn"),typeof e.onchange=="function"&&e.onchange(e)},e.querySelector(".cicon").onclick=()=>{var c=e.val(),a=new Date(c||new Date),u=a.getDate(),k=a.getMonth(),o=1;a=new Date(`${a.getFullYear()}-${a.getMonth()+1}-1`);var g=1;for(e.querySelector(".t-select .d-body").innerHTML="";a.getDay()>g;){var b=new Date(a.getTime()-(a.getDay()-g)*864e5);p(b,1),g++}for(;a.getMonth()==k;)p(a),a=new Date(a.getTime()+864e5);for(g=a.getDay();g<=7;)p(a,1),g++,a=new Date(a.getTime()+864e5);e.querySelector(".t-select").classList.remove("dn");function p(h,t){var n=document.createElement("span");n.innerHTML=`<div class="w23px h23px df aic cr jcC ${h.getDate()==u?"bd":""} ${h.getMonth()==k&&h.getDate()==u?"bg{green}":""} ${t?"bg#ccc c#9e9e9e":""}">${h.getDate()}</div>`,e.querySelector(".t-select .d-body").append(n),n.onclick=()=>{e.val(h)}}};var d=e.querySelectorAll("input");d.forEach((c,a)=>{c.addEventListener("keydown",u=>{u.keyCode==39?a<2&&c.selectionEnd==2&&setTimeout(()=>{d[a+1].focus()}):u.keyCode==37?a>0&&c.selectionEnd==2&&setTimeout(()=>{d[a-1].focus()}):u.keyCode==38||u.keyCode==40,console.log(u)}),c.addEventListener("keypress",u=>{if(u.key==13)return e.onchange(e);if("0,1,2,3,4,5,6,7,8,9".includes(u.key)){if(a<2&&u.target.value.length==2||a==2&&u.target.value.length==4)return event.preventDefault();if(a<2&&u.target.value.length==1){var k=a+1;k<3&&setTimeout(()=>{d[k].focus()})}else a==2&&u.target.value.length==3}else return event.preventDefault();c.previousElementSibling.innerText=c.value.padStart(a<2?2:4,0)})}),d[1].addEventListener("blur",c=>{var a=+d[1].value||new Date().getMonth()+1;a>12&&(a=12),d[1].value=(a+"").padStart(2,0)}),e.val=c=>{if(c){var a=new Date(c);d[0].value=a.getDate(),d[1].value=a.getMonth()+1,d[2].value=a.getFullYear()}var a=[d[2].value,d[1].value,d[0].value].join("-"),u=new Date(a);if(u+""!="Invalid Date")return e.querySelector(".t-select").classList.add("dn"),[u.getFullYear(),u.getMonth()+1,u.getDate()].join("-")}}function f(e){}function i(e){}})();(()=>{$el("t-datetime",[],e=>{m(e)},(e,s,d,c)=>{});function m(e){var s=e.options();e.innerHTML=`<div class="t-datebox df aic"><div class="posR">
  <span class="bd bda5px p3px df aic">
  	<span class="t-input-date bd0px posr">
     	<span class="">dd</span>
          <input class="tac bd0px posa w100% h100% t0px l0px" placeholder="dd">
     </span>/
     <span class="t-input-month posr">
     	<span class="p3px">mm</span>
          <input class="tac bd0px posa w100% h100% t0px l0px" placeholder="mm">
     </span>/
     <span class="t-input-year posr">
     	<span class="">yyyy</span>
          <input class="tac bd0px posa w100% h100% t0px l0px" placeholder="yyyy">
     </span>
     <span class="t-input-time posr">
     	<span class="">hh:ii</span>
          <input class="tac bd0px posa w100% h100% t0px l0px" placeholder="hh:ii">
     </span>
     <t-svg class="cicon w23px h23px ml5px cr" t-options="name:'user',fill:'${$colors.icon||"gray"}'"></t-svg>
  </span>
     <span class="t-select dn">
     	<div class="posA w{auto} h{auto}">
            <div class="d-head"></div>
            <div class="d-body dG gtc{23px;23px;23px;23px;23px;23px;23px;}">

            </div>
            <div class="d-foot df aic jcC">
                 <t-button class="btn_clear" t-options="name:'',title:'Clear'"></t-button>
                 <t-button class="btn_today" t-options="name:'',title:'Today'"></t-button>
            </div>
       </div>
     </span>
  </div></div>`,e.onchange=()=>{console.log("onchange",e.val())},e.querySelector(".btn_today").onclick=()=>{e.val(Date.now())},e.querySelector(".btn_clear").onclick=()=>{d.forEach(c=>{c.value=""}),e.querySelector(".t-select").classList.add("dn"),typeof e.onchange=="function"&&e.onchange(e)},e.querySelector(".cicon").onclick=()=>{var c=e.val(),a=new Date(c||new Date),u=a.getDate(),k=a.getMonth(),o=1;a=new Date(`${a.getFullYear()}-${a.getMonth()+1}-1`);var g=1;for(e.querySelector(".t-select .d-body").innerHTML="";a.getDay()>g;){var b=new Date(a.getTime()-(a.getDay()-g)*864e5);p(b,1),g++}for(;a.getMonth()==k;)p(a),a=new Date(a.getTime()+864e5);for(g=a.getDay();g<=7;)p(a,1),g++,a=new Date(a.getTime()+864e5);e.querySelector(".t-select").classList.remove("dn");function p(h,t){var n=document.createElement("span");n.innerHTML=`<div class="w23px h23px df aic cr jcC ${h.getDate()==u?"bd":""} ${h.getMonth()==k&&h.getDate()==u?"bg{green}":""} ${t?"bg#ccc c#9e9e9e":""}">${h.getDate()}</div>`,e.querySelector(".t-select .d-body").append(n),n.onclick=()=>{e.val(h)}}};var d=e.querySelectorAll("input");d.forEach((c,a)=>{c.addEventListener("keydown",u=>{u.keyCode==39?a<2&&c.selectionEnd==2&&setTimeout(()=>{d[a+1].focus()}):u.keyCode==37?a>0&&c.selectionEnd==2&&setTimeout(()=>{d[a-1].focus()}):u.keyCode==38||u.keyCode==40,console.log(u)}),c.addEventListener("keypress",u=>{if(u.key==13)return e.onchange(e);if("0,1,2,3,4,5,6,7,8,9".includes(u.key)){if(a<2&&u.target.value.length==2||a==2&&u.target.value.length==4)return event.preventDefault();if(a<2&&u.target.value.length==1){var k=a+1;k<3&&setTimeout(()=>{d[k].focus()})}else a==2&&u.target.value.length==3}else return event.preventDefault();c.previousElementSibling.innerText=c.value.padStart(a<2?2:4,0)})}),d[1].addEventListener("blur",c=>{var a=+d[1].value||new Date().getMonth()+1;a>12&&(a=12),d[1].value=(a+"").padStart(2,0)}),e.val=c=>{if(c){var a=new Date(c);d[0].value=a.getDate(),d[1].value=a.getMonth()+1,d[2].value=a.getFullYear()}var a=[d[2].value,d[1].value,d[0].value].join("-"),u=new Date(a);if(u+""!="Invalid Date")return e.querySelector(".t-select").classList.add("dn"),[u.getFullYear(),u.getMonth()+1,u.getDate()].join("-")}}function f(e){}function i(e){}})();$el("t-time",[],m=>{var f=m.options();m.innerHTML=`<input placeholder="hh:ii" ${Object.keys(f).map(i=>`${i}="${f[i]}"`).join(" ")}>`},(m,f,i,e)=>{});(()=>{var m={height:24,width:24,viewBox:"0 -960 960 960",fill:$$colors?.bgmain??"var(--c-dgreen)"};function f(i){let{svg:e,path:s,title:d}=$tags("http://www.w3.org/2000/svg");i.innerText="";var c=i.options(),a=$data.find(o=>o.name==c.name);let u=[];if(Array.isArray(a?.svg))for(let o of a.svg)u.push(s({d:o??""}));else u.push(s({d:a?.svg}));var k={...m};[...Object.keys(m),"name"].map(o=>{if(typeof c[o]<"u")return k[o]=c[o];if(a&&typeof a[o]<"u")return k[o]=a[o]}),i.$el=a?e(k,...u):null,$add(i,i.$el)}$el("x-svg",[],i=>{f(i),i.changeName=e=>{let s=$data.find(d=>d.name===e);i.querySelector("path")?.setAttribute("d",s?.svg)}},(i,e,s,d)=>{e=="t-options"&&d&&f(i)})})();(()=>{$el("x-layout",[],i=>{m(i)},(i,e,s,d)=>{e==="t-options"&&d&&m(i)});async function m(i){let e=i.options();Array.isArray(e.class)||(e.class=e.class.split(" ").filter(c=>c)),e.class=e.class.join(" "),i.className=e.class;let s=document.createDocumentFragment();for(;i.firstChild;)s.appendChild(i.firstChild);let d=Array.from(s.children);for(let c of d){let a=c.getAttribute("data-include");if(a){let u=await f(a);u&&(c.innerHTML=u)}}i.innerHTML=`
      <div class="${e.class}">
        ${d.map(c=>c.outerHTML).join("")}
    </div>
    `}async function f(i){try{let e=await fetch(i);if(!e.ok)throw new Error(`Failed to fetch: ${e.status}`);return await e.text()}catch(e){return console.error("Error fetching content:",e.message),"<div class='error'>Failed to load content</div>"}}})();(()=>{$el("x-include",["data-url"],f=>{m(f)},(f,i,e,s)=>{console.log(1,i,s,e),i==="t-options"&&s&&m(f)});async function m(f){f.innerHTML=`<div>
      	${await fetch(f.dataset.url).then(i=>i.text())}
        <div>`}})();})();
